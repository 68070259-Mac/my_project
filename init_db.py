# üìÅ init_db.py
# ‡πÉ‡∏ä‡πâ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ê‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• app.db ‡πÅ‡∏•‡∏∞‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á

from app import app, db, DailyLog, CycleHistory

# ‡πÉ‡∏ä‡πâ app context ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ SQLAlchemy ‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡πÑ‡∏î‡πâ
with app.app_context():
    print("üîÑ ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ê‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• app.db ...")
    db.create_all()

    # ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏≠‡∏¢‡∏π‡πà‡πÅ‡∏•‡πâ‡∏ß‡∏´‡∏£‡∏∑‡∏≠‡∏¢‡∏±‡∏á
    if DailyLog.query.first() is None and CycleHistory.query.first() is None:
        print("ü©∑ ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á ...")

        sample_logs = [
            DailyLog(log_date="2025-11-01", mood="üòä ‡∏£‡πà‡∏≤‡πÄ‡∏£‡∏¥‡∏á", symptoms="‡∏õ‡∏ß‡∏î‡∏ó‡πâ‡∏≠‡∏á, ‡∏õ‡∏ß‡∏î‡∏´‡∏±‡∏ß", flow="‡∏õ‡∏≤‡∏ô‡∏Å‡∏•‡∏≤‡∏á", color="‡πÅ‡∏î‡∏á‡∏™‡∏î", notes="‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ß‡∏±‡∏ô‡πÅ‡∏£‡∏Å"),
            DailyLog(log_date="2025-11-02", mood="üò£ ‡πÄ‡∏Ñ‡∏£‡∏µ‡∏¢‡∏î", symptoms="‡πÄ‡∏´‡∏ô‡∏∑‡πà‡∏≠‡∏¢", flow="‡∏°‡∏≤‡∏Å", color="‡πÅ‡∏î‡∏á‡πÄ‡∏Ç‡πâ‡∏°‡∏´‡∏£‡∏∑‡∏≠‡∏ô‡πâ‡∏≥‡∏ï‡∏≤‡∏•", notes="‡∏ô‡∏≠‡∏ô‡∏î‡∏∂‡∏Å"),
            DailyLog(log_date="2025-11-03", mood="üò¥ ‡∏≠‡πà‡∏≠‡∏ô‡πÄ‡∏û‡∏•‡∏µ‡∏¢", symptoms="‡∏ó‡πâ‡∏≠‡∏á‡∏≠‡∏∑‡∏î", flow="‡∏ô‡πâ‡∏≠‡∏¢", color="‡∏ä‡∏°‡∏û‡∏π", notes="‡∏î‡∏µ‡∏Ç‡∏∂‡πâ‡∏ô"),
        ]

        cycle = CycleHistory(
            start_date="2025-11-01",
            ovulation_date="2025-11-14",
            next_date="2025-11-29"
        )

        db.session.add_all(sample_logs + [cycle])
        db.session.commit()
        print("‚úÖ ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ê‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÅ‡∏•‡∏∞‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!")
    else:
        print("‚ÑπÔ∏è ‡∏û‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏≠‡∏¢‡∏π‡πà‡πÅ‡∏•‡πâ‡∏ß‡πÉ‡∏ô‡∏ê‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• app.db, ‡∏Ç‡πâ‡∏≤‡∏°‡∏Å‡∏≤‡∏£‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á")

print("üèÅ ‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏¥‡πâ‡∏ô!")
